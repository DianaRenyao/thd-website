<div class="chapter-container">
  <app-service-error-message [errorResponse]="errorResponse" [indicator]="'编辑章节失败'"></app-service-error-message>
  <button (click)="goExamManagement()" mat-raised-button>考试管理</button>
  <div *ngFor="let chapter of chapters">
    <button (click)="toggleAdd(chapter.sequence)" class="add-button" mat-icon-button>
      <mat-icon>add</mat-icon>
    </button>
    <div *ngIf="addingPosition === chapter.sequence">
      <label>序号：{{newChapter.sequence + 1}}
      </label>
      <label>章节名称：
        <input [(ngModel)]="newChapter.chapterName" placeholder="章节名称">
      </label>
      <button (click)="addChapter()" [disabled]="newChapter.chapterName === null" color="primary" mat-button>添加</button>
    </div>
    <span class="sequence">第{{chapter.sequence + 1}}章</span>
    <span class="chapter-name">{{chapter.chapterName}}</span>
    <button (click)="toggleEdit(chapter.sequence, chapter.chapterName)" mat-icon-button>
      <mat-icon>edit</mat-icon>
    </button>
    <button (click)="removeChapter(chapter.sequence)" mat-icon-button>
      <mat-icon>delete</mat-icon>
    </button>
    <div *ngIf="editingPosition === chapter.sequence">
      <label>序号：{{editingPosition + 1}}
      </label>
      <label>章节名称：
        <input [(ngModel)]="editingChapter.chapterName" placeholder="章节名称">
      </label>
      <button (click)="editChapter()" [disabled]="editingChapter.chapterName === null" color="primary" mat-button>修改
      </button>
    </div>
    <app-section-management [chapterSequence]="chapter.sequence" [courseId]="courseId" [sections]="chapter.sections"
                            class="section-management"></app-section-management>
  </div>
  <button (click)="toggleAdd(chapters.length)" class="add-button" mat-icon-button>
    <mat-icon>add</mat-icon>
  </button>
  <div *ngIf="addingPosition === chapters.length">
    <label>序号：{{newChapter.sequence + 1}}
    </label>
    <label>章节名称：
      <input [(ngModel)]="newChapter.chapterName" placeholder="章节名称"/>
    </label>
    <button (click)="addChapter()" [disabled]="newChapter.chapterName === null" color="primary" mat-button
            type="submit">添加
    </button>
  </div>
</div>
