<app-service-error-message [errorResponse]="courseErrorResponse" [indicator]="'获取课程信息失败'"></app-service-error-message>
<div *ngIf="course">
  <h2>{{ course.courseName }}</h2>
  <div *ngIf="!session">
    <button mat-raised-button routerLink="/login">申请加入</button>
  </div>
  <div *ngIf="session && session.userInfo.role == 'student'">
    <button (click)="applyCourse()" *ngIf="!application" mat-raised-button>申请加入</button>
    <button *ngIf="application && application.state === applicationState.Waiting" [disabled]="true" mat-raised-button>
      等待申请结果
    </button>
    <button *ngIf="application && application.state === applicationState.Pass" mat-raised-button routerLink="learn">
      进入学习
    </button>
    <button *ngIf="application && application.state === applicationState.Reject" [disabled]="true" mat-raised-button>
      申请已被拒绝
    </button>
  </div>
  <app-teacher [teacher]="course.teacher"></app-teacher>
  <p>{{ course.description }}</p>
  <ol *ngFor="let chapter of course.chapters" class="chapter-ol">
    <li>
      <span class="sequence">第{{chapter.sequence + 1}}章</span>
      <span class="chapter-name">{{chapter.chapterName}}</span>
    </li>
    <li>
      <ol *ngFor="let section of chapter.sections" class="section-ol">
        <li>
          <span class="sequence">第{{section.sequence + 1}}节</span>
          <span class="section-name">{{section.sectionName}}</span>
        </li>
      </ol>
    </li>
  </ol>
</div>
